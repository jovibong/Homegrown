<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--Custom Bootstrap Inspired Stylesheet-->
    <link href="css/mainmin.css" rel="stylesheet">

    <!--Icons-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.7.2/font/bootstrap-icons.min.css"
        rel="stylesheet">

    <!--Navbar and Footer Stylesheet-->
    <link href="css/navbar_footer_style.css" rel="stylesheet">

    <!--Badge for mentor CSS-->
    <link rel="stylesheet" href="css/badge_mentor.css">

    <link rel="stylesheet" href="css/courses.css">

    <!--Animations CSS-->
    <link rel="stylesheet" href="css/animation.css">

    <style>
        .dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .correct-dot {
            background-color: #4caf50;
            /* Green for Correct */
        }

        .missed-dot {
            background-color: #f44336;
            /* Red for Missed */
        }
    </style>
</head>

<body>
    <div id="navbar"></div>
    <div id="app">
        <!--Back Button and Course Title-->
        <section id="Title" class="container pt-3 pb-0 fade-in-top">
            <div class="container mx-auto mb-4 text-center">
                <h2 class="text-primary fw-bold mb-0 display-5">{{course_name}}</h2>
            </div>
            <!-- Lesson Name -->
            <h3 class="text-black display-5 mt-3 text-center">{{lesson.name}}</h3>

        </section>
        <section id="data">
            <div class="container mt-5">
                <div class="row mx-auto mb-5 d-flex align-items-stretch">
                    <div class="col-4">
                        <div class="card text-center shadow-sm h-100">
                            <div class="card-body">
                                <h6 class="card-title fw-bold text-muted text-start text-muted">Summary</h6>
                                <div class="row container-fluid" style="height:120px">
                                    <div class="col-6 h-100 d-flex justify-content-center">
                                        <canvas id="myChart"></canvas>
                                    </div>
                                    <div class="col-6 d-flex align-items-center justify-content-center">
                                        <div>
                                            <p class="mb-1"><span class="dot correct-dot"></span> Correct <span
                                                    class="fw-bold">{{score}}</span></p>
                                            <p class="mb-1"><span class="dot missed-dot"></span> Missed <span
                                                    class="fw-bold">{{num_wrong}}</span></p>
                                        </div>
                                    </div>

                                </div>
                                <hr>
                                <button class="btn btn-link text-warning fw-bold">SHARE</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="card text-center shadow-sm h-100">
                            <div class="card-body h-100">
                                <h6 class="card-title fw-bold text-muted text-start text-muted">Score</h6>
                                <div class="display-4 text-primary fw-bold">{{score_in_percentage}}%</div>
                                <div class="text-muted fw-bold text-center">from {{questions.length}} questions correct
                                </div>

                                <div class="container-fluid row mt-5">
                                    <div class="col-6 text-center">
                                        <div class="fw-bold fs-4">{{previous_quiz_score * 100}}%</div>
                                        <div class="text-muted">Previous score</div>
                                    </div>
                                    <div class="col-6 text-center">
                                        <div v-if="improvement > 0">
                                            <div class="text-success fw-bold fs-4">+{{improvement}}%</div>
                                            <div class="text-muted">Improvement</div>
                                        </div>
                                        <div v-else>
                                            <div class="text-danger fw-bold fs-4">{{improvement}}%</div>
                                            <div class="text-muted">Deprovement</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="card shadow-sm h-100">
                            <div class="card-body h-100">
                                <h6 class="card-title fw-bold text-muted text-start">Leaderboard</h6>
                                <ul>
                                    <li class="mb-4">You are ahead of <br>
                                        <span class="display-5 text-primary fw-bold text-center">
                                            {{ranking[0]}}
                                        </span>
                                        of users.
                                    </li>
                                    <li>You rank at the <span
                                            class="h4 fw-bold text-primary d-inline-block">{{ranking[1]}}th</span>
                                        of all users
                                        who have completed this quiz.</li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="question_review" class="container p-0 accordion">
            <div class="h2 mx-0 mb-3">
                <b>Questions Review </b>
                <span class="h3 text-muted">({{questions.length}})</span>
            </div>
                <div v-for="(question,key) in questions" class="fade-in-bottom my-3 accordion-item" :ref="key" type="button"
                    data-bs-toggle="collapse" :data-bs-target="'#collapse'+key" aria-expanded="true"
                    :aria-controls="'collapse'+key">
                    <div class="card shadow-sm container-fluid row p-0 m-0 hover-animate hover-less">
                        <div class="card-body row d-flex align-items-center">
                            <div class="d-none d-md-inline-flex">
                                <div class="col-1">
                                    <div class="d-md-inline-flex d-none rounded-circle bg-secondary d-flex align-items-center text-center justify-content-center"
                                        style="height: 40px;width: 40px;">{{key+1}}
                                    </div>
                                </div>
                                <div class="col-9 d-flex align-items-center">
                                    {{question.question}}
                                </div>
                                <div class="col-2 d-flex justify-content-end">
                                    <div v-if="question.correct_answer == answers[key]">
                                        <i class="bi bi-check-circle text-success fs-3"></i>
                                    </div>
                                    <div v-else>
                                        <i class="bi bi-x-circle text-danger fs-3"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="d-inline-flex d-md-none align-items-center">
                                <div class="col-10">
                                    <h4 class="m-0 p-0">Question {{key+1}}:
                                        <span v-if="question.correct_answer == answers[key]" class="text-success ms-2">
                                            Correct!
                                        </span>
                                        <span v-else class="text-danger ms-2">
                                            Wrong!
                                        </span>
                                    </h4>
                                </div>
                                <div class="col-2">
                                    <i class="bi bi-chevron-down fs-3"></i>
                                </div>
                            </div>
                            <div :id="'collapse'+key" class="accordion-collapse collapse"
                                data-bs-parent="#question_review">
                                <div class="accordion-body">
                                    Correct Answer: {{question.options[question.correct_answer]}} <br>
                                    Your Answer: {{question.options[answers[key]]}}
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
        </section>

        <div class="container-fluid row mx-auto my-5">
            <div class="col-2"></div>
            <a href="individual_course.html"
                class="btn btn-warning text-dark d-flex align-items-center justify-content-center col-3 hover-animate py-3">
                <i class="bi bi-arrow-left me-2"></i>
                <span class="d-none d-md-inline">Back to course overview</span>
                <span class="d-inline d-md-none">Course Overview</span>
            </a>
            <div class="col-2"></div>
            <a href="video_1.html"
                class="btn btn-warning text-dark d-flex align-items-center col-3 justify-content-center hover-animate py-3">
                <span class="d-none d-md-inline text-end">Continue to next lesson</span>
                <span class="d-inline d-md-none text-end">Next Lesson</span>
                <i class="bi bi-arrow-right ms-2"></i>
            </a>
        </div>
        <div class="col-2"></div>
    </div>



    <!-- Footer Placeholder -->
    <footer class="fade-in-bottom"></footer>

    <!--Vue-->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!--Axios-->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!--Bootstrap JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!--JS for loading navbar and footer-->
    <script src="js/navbar_fw.js"></script>
    <script src="js/footer.js"></script>

    <!--Animations JS-->
    <script src="js/animation.js"></script>

    <!--Chart JS-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>

        const questions = [
            {
                id: 101,
                question_number: 1,
                type: "multiple_choice",
                question: "Which version of Python is recommended for new users to install?",
                options: {
                    A: "Python 2.7",
                    B: "Python 3.x",
                    C: "Python 1.5",
                    D: "Python 4.0"
                },
                correct_answer: "B"
            },
            {
                id: 102,
                question_number: 2,
                type: "multiple_choice",
                question: "What is the best way to verify that Python is correctly installed on your system?",
                options: {
                    A: "python --install",
                    B: "verify-python",
                    C: "python --version",
                    D: "python --check"
                },
                correct_answer: "C"
            },
            {
                id: 103,
                question_number: 3,
                type: "multiple_choice",
                question: "Which package manager is commonly used on macOS to install Python?",
                options: {
                    A: "apt-get",
                    B: "Homebrew",
                    C: "yum",
                    D: "Chocolatey"
                },
                correct_answer: "B"
            },
            {
                id: 104,
                question_number: 4,
                type: "multiple_choice",
                question: "What option should you select during Python installation to make it accessible from the command line?",
                options: {
                    A: "Install Python for All Users",
                    B: "Add Python to PATH",
                    C: "Install Documentation",
                    D: "Install PIP"
                },
                correct_answer: "B"
            },
            {
                id: 105,
                question_number: 5,
                type: "multiple_choice",
                question: "Which command is used to create a virtual environment in Python?",
                options: {
                    A: "python -m venv [environment-name]",
                    B: "python create-env [environment-name]",
                    C: "python --virtual [environment-name]",
                    D: "python make-env [environment-name]"
                },
                correct_answer: "A"
            }
        ];


        const lesson = {
            id: "Q001",
            name: "Lesson 1: Quiz",
            title: "Installing Python",
            description:
                `  
                Feel free to go back to the lesson if you are unable to answer the questions.
            `,
            typeof: "quiz",
            questions: questions,
            next_name: "Lesson 1: Quiz",
            rating: 84
        }


        const app = Vue.createApp({
            data() {
                return {
                    course_name: "Introduction to Python",
                    answers: [],
                    lesson: lesson,
                    questions: lesson.questions,
                    score: 0,
                    ranking: ["86%", 1435],
                    previous_quiz_score: 0.75
                }
            },
            methods: {

            },
            computed: {
                num_wrong() {
                    return this.questions.length - this.score;
                },
                improvement() {
                    return Math.round((this.score / this.questions.length) / this.previous_quiz_score * 100 - 100, 0);
                },
                score_in_percentage() {
                    return Math.round(this.score / this.questions.length * 100, 0);
                }
            },
            mounted() {
                // Load answers from localStorage when Vue instance is mounted
                this.answers = JSON.parse(localStorage.getItem("user_answers"));
                this.score = JSON.parse(localStorage.getItem("user_score"));

                // Create Chart
                const ctx = document.getElementById('myChart');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [this.score, this.questions.length - this.score],
                            backgroundColor: [
                                'rgb(76, 175, 80)',
                                'rgb(244, 67, 54)'
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        cutout: '65%'
                    },

                });
            }
        });
        const vm = app.mount('#app');
    </script>
</body>

</html>